function S(t){return t.split("-")[1]}function lt(t){return t==="y"?"height":"width"}function W(t){return t.split("-")[0]}function I(t){return["top","bottom"].includes(W(t))?"x":"y"}function ft(t,e,n){let{reference:o,floating:c}=t;const l=o.x+o.width/2-c.width/2,i=o.y+o.height/2-c.height/2,r=I(e),f=lt(r),a=o[f]/2-c[f]/2,m=r==="x";let s;switch(W(e)){case"top":s={x:l,y:o.y-c.height};break;case"bottom":s={x:l,y:o.y+o.height};break;case"right":s={x:o.x+o.width,y:i};break;case"left":s={x:o.x-c.width,y:i};break;default:s={x:o.x,y:o.y}}switch(S(e)){case"start":s[r]-=a*(n&&m?-1:1);break;case"end":s[r]+=a*(n&&m?-1:1)}return s}const kt=async(t,e,n)=>{const{placement:o="bottom",strategy:c="absolute",middleware:l=[],platform:i}=n,r=l.filter(Boolean),f=await(i.isRTL==null?void 0:i.isRTL(e));let a=await i.getElementRects({reference:t,floating:e,strategy:c}),{x:m,y:s}=ft(a,o,f),u=o,d={},h=0;for(let p=0;p<r.length;p++){const{name:g,fn:y}=r[p],{x,y:b,data:T,reset:L}=await y({x:m,y:s,initialPlacement:o,placement:u,strategy:c,middlewareData:d,rects:a,platform:i,elements:{reference:t,floating:e}});m=x??m,s=b??s,d={...d,[g]:{...d[g],...T}},L&&h<=50&&(h++,typeof L=="object"&&(L.placement&&(u=L.placement),L.rects&&(a=L.rects===!0?await i.getElementRects({reference:t,floating:e,strategy:c}):L.rects),{x:m,y:s}=ft(a,u,f)),p=-1)}return{x:m,y:s,placement:u,strategy:c,middlewareData:d}};function yt(t){return typeof t!="number"?function(e){return{top:0,right:0,bottom:0,left:0,...e}}(t):{top:t,right:t,bottom:t,left:t}}function Q(t){return{...t,top:t.y,left:t.x,right:t.x+t.width,bottom:t.y+t.height}}async function ct(t,e){var n;e===void 0&&(e={});const{x:o,y:c,platform:l,rects:i,elements:r,strategy:f}=t,{boundary:a="clippingAncestors",rootBoundary:m="viewport",elementContext:s="floating",altBoundary:u=!1,padding:d=0}=e,h=yt(d),p=r[u?s==="floating"?"reference":"floating":s],g=Q(await l.getClippingRect({element:(n=await(l.isElement==null?void 0:l.isElement(p)))==null||n?p:p.contextElement||await(l.getDocumentElement==null?void 0:l.getDocumentElement(r.floating)),boundary:a,rootBoundary:m,strategy:f})),y=s==="floating"?{...i.floating,x:o,y:c}:i.reference,x=await(l.getOffsetParent==null?void 0:l.getOffsetParent(r.floating)),b=await(l.isElement==null?void 0:l.isElement(x))&&await(l.getScale==null?void 0:l.getScale(x))||{x:1,y:1},T=Q(l.convertOffsetParentRelativeRectToViewportRelativeRect?await l.convertOffsetParentRelativeRectToViewportRelativeRect({rect:y,offsetParent:x,strategy:f}):y);return{top:(g.top-T.top+h.top)/b.y,bottom:(T.bottom-g.bottom+h.bottom)/b.y,left:(g.left-T.left+h.left)/b.x,right:(T.right-g.right+h.right)/b.x}}const Ot=Math.min,Ct=Math.max;function ot(t,e,n){return Ct(t,Ot(e,n))}const zt=t=>({name:"arrow",options:t,async fn(e){const{element:n,padding:o=0}=t||{},{x:c,y:l,placement:i,rects:r,platform:f,elements:a}=e;if(n==null)return{};const m=yt(o),s={x:c,y:l},u=I(i),d=lt(u),h=await f.getDimensions(n),p=u==="y",g=p?"top":"left",y=p?"bottom":"right",x=p?"clientHeight":"clientWidth",b=r.reference[d]+r.reference[u]-s[u]-r.floating[d],T=s[u]-r.reference[u],L=await(f.getOffsetParent==null?void 0:f.getOffsetParent(n));let A=L?L[x]:0;A&&await(f.isElement==null?void 0:f.isElement(L))||(A=a.floating[x]||r.floating[d]);const C=b/2-T/2,F=m[g],H=A-h[d]-m[y],w=A/2-h[d]/2+C,v=ot(F,w,H),E=S(i)!=null&&w!=v&&r.reference[d]/2-(w<F?m[g]:m[y])-h[d]/2<0;return{[u]:s[u]-(E?w<F?F-w:H-w:0),data:{[u]:v,centerOffset:w-v}}}}),Ft=["top","right","bottom","left"],ut=Ft.reduce((t,e)=>t.concat(e,e+"-start",e+"-end"),[]),St={left:"right",right:"left",bottom:"top",top:"bottom"};function U(t){return t.replace(/left|right|bottom|top/g,e=>St[e])}function xt(t,e,n){n===void 0&&(n=!1);const o=S(t),c=I(t),l=lt(c);let i=c==="x"?o===(n?"end":"start")?"right":"left":o==="start"?"bottom":"top";return e.reference[l]>e.floating[l]&&(i=U(i)),{main:i,cross:U(i)}}const Vt={start:"end",end:"start"};function K(t){return t.replace(/start|end/g,e=>Vt[e])}const Nt=function(t){return t===void 0&&(t={}),{name:"autoPlacement",options:t,async fn(e){var n,o,c;const{rects:l,middlewareData:i,placement:r,platform:f,elements:a}=e,{crossAxis:m=!1,alignment:s,allowedPlacements:u=ut,autoAlignment:d=!0,...h}=t,p=s!==void 0||u===ut?function(w,v,E){return(w?[...E.filter(R=>S(R)===w),...E.filter(R=>S(R)!==w)]:E.filter(R=>W(R)===R)).filter(R=>!w||S(R)===w||!!v&&K(R)!==R)}(s||null,d,u):u,g=await ct(e,h),y=((n=i.autoPlacement)==null?void 0:n.index)||0,x=p[y];if(x==null)return{};const{main:b,cross:T}=xt(x,l,await(f.isRTL==null?void 0:f.isRTL(a.floating)));if(r!==x)return{reset:{placement:p[0]}};const L=[g[W(x)],g[b],g[T]],A=[...((o=i.autoPlacement)==null?void 0:o.overflows)||[],{placement:x,overflows:L}],C=p[y+1];if(C)return{data:{index:y+1,overflows:A},reset:{placement:C}};const F=A.map(w=>{const v=S(w.placement);return[w.placement,v&&m?w.overflows.slice(0,2).reduce((E,R)=>E+R,0):w.overflows[0],w.overflows]}).sort((w,v)=>w[1]-v[1]),H=((c=F.filter(w=>w[2].slice(0,S(w[0])?2:3).every(v=>v<=0))[0])==null?void 0:c[0])||F[0][0];return H!==r?{data:{index:y+1,overflows:A},reset:{placement:H}}:{}}}},jt=function(t){return t===void 0&&(t={}),{name:"flip",options:t,async fn(e){var n;const{placement:o,middlewareData:c,rects:l,initialPlacement:i,platform:r,elements:f}=e,{mainAxis:a=!0,crossAxis:m=!0,fallbackPlacements:s,fallbackStrategy:u="bestFit",fallbackAxisSideDirection:d="none",flipAlignment:h=!0,...p}=t,g=W(o),y=W(i)===i,x=await(r.isRTL==null?void 0:r.isRTL(f.floating)),b=s||(y||!h?[U(i)]:function(v){const E=U(v);return[K(v),E,K(E)]}(i));s||d==="none"||b.push(...function(v,E,R,B){const V=S(v);let $=function(Y,nt,Pt){const st=["left","right"],at=["right","left"],Dt=["top","bottom"],$t=["bottom","top"];switch(Y){case"top":case"bottom":return Pt?nt?at:st:nt?st:at;case"left":case"right":return nt?Dt:$t;default:return[]}}(W(v),R==="start",B);return V&&($=$.map(Y=>Y+"-"+V),E&&($=$.concat($.map(K)))),$}(i,h,d,x));const T=[i,...b],L=await ct(e,p),A=[];let C=((n=c.flip)==null?void 0:n.overflows)||[];if(a&&A.push(L[g]),m){const{main:v,cross:E}=xt(o,l,x);A.push(L[v],L[E])}if(C=[...C,{placement:o,overflows:A}],!A.every(v=>v<=0)){var F,H;const v=(((F=c.flip)==null?void 0:F.index)||0)+1,E=T[v];if(E)return{data:{index:v,overflows:C},reset:{placement:E}};let R=(H=C.filter(B=>B.overflows[0]<=0).sort((B,V)=>B.overflows[1]-V.overflows[1])[0])==null?void 0:H.placement;if(!R)switch(u){case"bestFit":{var w;const B=(w=C.map(V=>[V.placement,V.overflows.filter($=>$>0).reduce(($,Y)=>$+Y,0)]).sort((V,$)=>V[1]-$[1])[0])==null?void 0:w[0];B&&(R=B);break}case"initialPlacement":R=i}if(o!==R)return{reset:{placement:R}}}return{}}}},Xt=function(t){return t===void 0&&(t=0),{name:"offset",options:t,async fn(e){const{x:n,y:o}=e,c=await async function(l,i){const{placement:r,platform:f,elements:a}=l,m=await(f.isRTL==null?void 0:f.isRTL(a.floating)),s=W(r),u=S(r),d=I(r)==="x",h=["left","top"].includes(s)?-1:1,p=m&&d?-1:1,g=typeof i=="function"?i(l):i;let{mainAxis:y,crossAxis:x,alignmentAxis:b}=typeof g=="number"?{mainAxis:g,crossAxis:0,alignmentAxis:null}:{mainAxis:0,crossAxis:0,alignmentAxis:null,...g};return u&&typeof b=="number"&&(x=u==="end"?-1*b:b),d?{x:x*p,y:y*h}:{x:y*h,y:x*p}}(e,t);return{x:n+c.x,y:o+c.y,data:c}}}};function Wt(t){return t==="x"?"y":"x"}const Yt=function(t){return t===void 0&&(t={}),{name:"shift",options:t,async fn(e){const{x:n,y:o,placement:c}=e,{mainAxis:l=!0,crossAxis:i=!1,limiter:r={fn:g=>{let{x:y,y:x}=g;return{x:y,y:x}}},...f}=t,a={x:n,y:o},m=await ct(e,f),s=I(W(c)),u=Wt(s);let d=a[s],h=a[u];if(l){const g=s==="y"?"bottom":"right";d=ot(d+m[s==="y"?"top":"left"],d,d-m[g])}if(i){const g=u==="y"?"bottom":"right";h=ot(h+m[u==="y"?"top":"left"],h,h-m[g])}const p=r.fn({...e,[s]:d,[u]:h});return{...p,data:{x:p.x-n,y:p.y-o}}}}};function P(t){var e;return((e=t.ownerDocument)==null?void 0:e.defaultView)||window}function k(t){return P(t).getComputedStyle(t)}function wt(t){return t instanceof P(t).Node}function z(t){return wt(t)?(t.nodeName||"").toLowerCase():""}let J;function vt(){if(J)return J;const t=navigator.userAgentData;return t&&Array.isArray(t.brands)?(J=t.brands.map(e=>e.brand+"/"+e.version).join(" "),J):navigator.userAgent}function O(t){return t instanceof P(t).HTMLElement}function D(t){return t instanceof P(t).Element}function dt(t){return typeof ShadowRoot>"u"?!1:t instanceof P(t).ShadowRoot||t instanceof ShadowRoot}function G(t){const{overflow:e,overflowX:n,overflowY:o,display:c}=k(t);return/auto|scroll|overlay|hidden|clip/.test(e+o+n)&&!["inline","contents"].includes(c)}function Ht(t){return["table","td","th"].includes(z(t))}function it(t){const e=/firefox/i.test(vt()),n=k(t),o=n.backdropFilter||n.WebkitBackdropFilter;return n.transform!=="none"||n.perspective!=="none"||!!o&&o!=="none"||e&&n.willChange==="filter"||e&&!!n.filter&&n.filter!=="none"||["transform","perspective"].some(c=>n.willChange.includes(c))||["paint","layout","strict","content"].some(c=>{const l=n.contain;return l!=null&&l.includes(c)})}function rt(){return/^((?!chrome|android).)*safari/i.test(vt())}function tt(t){return["html","body","#document"].includes(z(t))}const mt=Math.min,_=Math.max,Z=Math.round;function bt(t){const e=k(t);let n=parseFloat(e.width)||0,o=parseFloat(e.height)||0;const c=O(t),l=c?t.offsetWidth:n,i=c?t.offsetHeight:o,r=Z(n)!==l||Z(o)!==i;return r&&(n=l,o=i),{width:n,height:o,fallback:r}}function Rt(t){return D(t)?t:t.contextElement}const Lt={x:1,y:1};function j(t){const e=Rt(t);if(!O(e))return Lt;const n=e.getBoundingClientRect(),{width:o,height:c,fallback:l}=bt(e);let i=(l?Z(n.width):n.width)/o,r=(l?Z(n.height):n.height)/c;return i&&Number.isFinite(i)||(i=1),r&&Number.isFinite(r)||(r=1),{x:i,y:r}}function N(t,e,n,o){var c,l;e===void 0&&(e=!1),n===void 0&&(n=!1);const i=t.getBoundingClientRect(),r=Rt(t);let f=Lt;e&&(o?D(o)&&(f=j(o)):f=j(t));const a=r?P(r):window,m=rt()&&n;let s=(i.left+(m&&((c=a.visualViewport)==null?void 0:c.offsetLeft)||0))/f.x,u=(i.top+(m&&((l=a.visualViewport)==null?void 0:l.offsetTop)||0))/f.y,d=i.width/f.x,h=i.height/f.y;if(r){const p=P(r),g=o&&D(o)?P(o):o;let y=p.frameElement;for(;y&&o&&g!==p;){const x=j(y),b=y.getBoundingClientRect(),T=getComputedStyle(y);b.x+=(y.clientLeft+parseFloat(T.paddingLeft))*x.x,b.y+=(y.clientTop+parseFloat(T.paddingTop))*x.y,s*=x.x,u*=x.y,d*=x.x,h*=x.y,s+=b.x,u+=b.y,y=P(y).frameElement}}return Q({width:d,height:h,x:s,y:u})}function M(t){return((wt(t)?t.ownerDocument:t.document)||window.document).documentElement}function et(t){return D(t)?{scrollLeft:t.scrollLeft,scrollTop:t.scrollTop}:{scrollLeft:t.pageXOffset,scrollTop:t.pageYOffset}}function Et(t){return N(M(t)).left+et(t).scrollLeft}function X(t){if(z(t)==="html")return t;const e=t.assignedSlot||t.parentNode||dt(t)&&t.host||M(t);return dt(e)?e.host:e}function Tt(t){const e=X(t);return tt(e)?e.ownerDocument.body:O(e)&&G(e)?e:Tt(e)}function q(t,e){var n;e===void 0&&(e=[]);const o=Tt(t),c=o===((n=t.ownerDocument)==null?void 0:n.body),l=P(o);return c?e.concat(l,l.visualViewport||[],G(o)?o:[]):e.concat(o,q(o))}function pt(t,e,n){let o;if(e==="viewport")o=function(i,r){const f=P(i),a=M(i),m=f.visualViewport;let s=a.clientWidth,u=a.clientHeight,d=0,h=0;if(m){s=m.width,u=m.height;const p=rt();(!p||p&&r==="fixed")&&(d=m.offsetLeft,h=m.offsetTop)}return{width:s,height:u,x:d,y:h}}(t,n);else if(e==="document")o=function(i){const r=M(i),f=et(i),a=i.ownerDocument.body,m=_(r.scrollWidth,r.clientWidth,a.scrollWidth,a.clientWidth),s=_(r.scrollHeight,r.clientHeight,a.scrollHeight,a.clientHeight);let u=-f.scrollLeft+Et(i);const d=-f.scrollTop;return k(a).direction==="rtl"&&(u+=_(r.clientWidth,a.clientWidth)-m),{width:m,height:s,x:u,y:d}}(M(t));else if(D(e))o=function(i,r){const f=N(i,!0,r==="fixed"),a=f.top+i.clientTop,m=f.left+i.clientLeft,s=O(i)?j(i):{x:1,y:1};return{width:i.clientWidth*s.x,height:i.clientHeight*s.y,x:m*s.x,y:a*s.y}}(e,n);else{const i={...e};if(rt()){var c,l;const r=P(t);i.x-=((c=r.visualViewport)==null?void 0:c.offsetLeft)||0,i.y-=((l=r.visualViewport)==null?void 0:l.offsetTop)||0}o=i}return Q(o)}function At(t,e){const n=X(t);return!(n===e||!D(n)||tt(n))&&(k(n).position==="fixed"||At(n,e))}function gt(t,e){return O(t)&&k(t).position!=="fixed"?e?e(t):t.offsetParent:null}function ht(t,e){const n=P(t);if(!O(t))return n;let o=gt(t,e);for(;o&&Ht(o)&&k(o).position==="static";)o=gt(o,e);return o&&(z(o)==="html"||z(o)==="body"&&k(o).position==="static"&&!it(o))?n:o||function(c){let l=X(c);for(;O(l)&&!tt(l);){if(it(l))return l;l=X(l)}return null}(t)||n}function Bt(t,e,n){const o=O(e),c=M(e),l=N(t,!0,n==="fixed",e);let i={scrollLeft:0,scrollTop:0};const r={x:0,y:0};if(o||!o&&n!=="fixed")if((z(e)!=="body"||G(c))&&(i=et(e)),O(e)){const f=N(e,!0);r.x=f.x+e.clientLeft,r.y=f.y+e.clientTop}else c&&(r.x=Et(c));return{x:l.left+i.scrollLeft-r.x,y:l.top+i.scrollTop-r.y,width:l.width,height:l.height}}const Mt={getClippingRect:function(t){let{element:e,boundary:n,rootBoundary:o,strategy:c}=t;const l=n==="clippingAncestors"?function(a,m){const s=m.get(a);if(s)return s;let u=q(a).filter(g=>D(g)&&z(g)!=="body"),d=null;const h=k(a).position==="fixed";let p=h?X(a):a;for(;D(p)&&!tt(p);){const g=k(p),y=it(p);y||g.position!=="fixed"||(d=null),(h?!y&&!d:!y&&g.position==="static"&&d&&["absolute","fixed"].includes(d.position)||G(p)&&!y&&At(a,p))?u=u.filter(x=>x!==p):d=g,p=X(p)}return m.set(a,u),u}(e,this._c):[].concat(n),i=[...l,o],r=i[0],f=i.reduce((a,m)=>{const s=pt(e,m,c);return a.top=_(s.top,a.top),a.right=mt(s.right,a.right),a.bottom=mt(s.bottom,a.bottom),a.left=_(s.left,a.left),a},pt(e,r,c));return{width:f.right-f.left,height:f.bottom-f.top,x:f.left,y:f.top}},convertOffsetParentRelativeRectToViewportRelativeRect:function(t){let{rect:e,offsetParent:n,strategy:o}=t;const c=O(n),l=M(n);if(n===l)return e;let i={scrollLeft:0,scrollTop:0},r={x:1,y:1};const f={x:0,y:0};if((c||!c&&o!=="fixed")&&((z(n)!=="body"||G(l))&&(i=et(n)),O(n))){const a=N(n);r=j(n),f.x=a.x+n.clientLeft,f.y=a.y+n.clientTop}return{width:e.width*r.x,height:e.height*r.y,x:e.x*r.x-i.scrollLeft*r.x+f.x,y:e.y*r.y-i.scrollTop*r.y+f.y}},isElement:D,getDimensions:function(t){return bt(t)},getOffsetParent:ht,getDocumentElement:M,getScale:j,async getElementRects(t){let{reference:e,floating:n,strategy:o}=t;const c=this.getOffsetParent||ht,l=this.getDimensions;return{reference:Bt(e,await c(n),o),floating:{x:0,y:0,...await l(n)}}},getClientRects:t=>Array.from(t.getClientRects()),isRTL:t=>k(t).direction==="rtl"};function _t(t,e,n,o){o===void 0&&(o={});const{ancestorScroll:c=!0,ancestorResize:l=!0,elementResize:i=!0,animationFrame:r=!1}=o,f=c||l?[...D(t)?q(t):t.contextElement?q(t.contextElement):[],...q(e)]:[];f.forEach(u=>{const d=!D(u)&&u.toString().includes("V");!c||r&&!d||u.addEventListener("scroll",n,{passive:!0}),l&&u.addEventListener("resize",n)});let a,m=null;i&&(m=new ResizeObserver(()=>{n()}),D(t)&&!r&&m.observe(t),D(t)||!t.contextElement||r||m.observe(t.contextElement),m.observe(e));let s=r?N(t):null;return r&&function u(){const d=N(t);!s||d.x===s.x&&d.y===s.y&&d.width===s.width&&d.height===s.height||n(),s=d,a=requestAnimationFrame(u)}(),n(),()=>{var u;f.forEach(d=>{c&&d.removeEventListener("scroll",n),l&&d.removeEventListener("resize",n)}),(u=m)==null||u.disconnect(),m=null,r&&cancelAnimationFrame(a)}}const qt=(t,e,n)=>{const o=new Map,c={platform:Mt,...n},l={...c.platform,_c:o};return kt(t,e,{...c,platform:l})};export{Xt as D,Yt as a,jt as b,qt as k,zt as u,Nt as v,_t as z};
