import{u as I,r as d,A,j as e,Q as g,F as D,b as E}from"./index-74d0d24f.js";import{L as l,F as L,T as i,S as z}from"./Tooltip-6d459ae5.js";import"./index-2a1aa769.js";import{S as B}from"./react-select.esm-4d872c73.js";import{F as R}from"./index.esm-747e09e3.js";import"./index.esm-396e9f6c.js";import"./iconBase-c989d1dc.js";import"./floating-ui.dom.browser.min-b2afe59a.js";import"./index.esm-8bccb4d0.js";import"./toConsumableArray-399b6458.js";const ee=({addModal:$,setAddModal:c,setSelectedGovernorate:Q,encategoriesOptions:y,arcategoriesOptions:f,getSellerProducts:x,setAllProducts:h,setIsLoading:N})=>{const{i18n:s}=I(),{mainRequest:C,removeBackground:G}=d.useContext(A),v=JSON.parse(localStorage.getItem("sellerToken")),w=async({title_ar:a,title_en:m,start_date:o,category:p,quantity:F,price:S,image:j},P,T)=>{try{const r=new D;r.append("token",v),r.append("title_ar",a),r.append("title_en",m),r.append("category_id",p==null?void 0:p.value),r.append("quantity",F),r.append("price",S),r.append("start_date",o),r.append("images",j,j.name);const J=await C.post(`${E}/vendor/products/create`,r,{headers:{accept:"application/json","Content-Type":"multipart/form-data",Authorization:`Bearer ${v}`}});g.success(s.language==="en"?"The product has been uploaded":"تم رفع المنتج بنجاح"),x(h)}catch(r){console.log(r),g.error(s.language==="en"?"There is an error, please try again later":"يوجد خطأ ما، الرجاء المحاولة مره اخري")}finally{P(!1),T(!1),x(h,N)}},[t,n]=d.useState({image:null,title_en:"",title_ar:"",category:null,quantity:"",price:"",start_date:""}),[u,_]=d.useState(null),[b,k]=d.useState(!1),q=()=>{if(!u||!t.title_ar||!t.category||!t.quantity||!t.price||!t.start_date){g.error(s.language==="en"?"Please enter all required fields":"برجاء إدخال جميع الحقول المطلوبة");return}const a=new FileReader;a.onloadend=()=>{const m=new Blob([a.result],{type:u.type}),o={...t,image:m};console.log(o),w(o,k,c)},a.readAsArrayBuffer(u)};return e.jsx("div",{className:"fixed z-[10000] inset-0 overflow-y-auto",children:e.jsxs("div",{className:"flex items-end justify-center min-h-screen px-4 pt-4 pb-20 sm:block sm:p-0",children:[e.jsx("div",{className:"fixed inset-0 transition-opacity","aria-hidden":"true",children:e.jsx("div",{className:"absolute inset-0 bg-gray-500 bg-opacity-90"})}),e.jsxs("div",{className:"modal-app relative bg-white rounded-lg overflow-hidden shadow-xl transform transition-all sm:my-8 sm:align-middle sm:max-w-lg sm:w-full",children:[e.jsxs("div",{className:"sticky z-10 top-0 left-0 right-0 bg-white px-4 py-2 shadow-md flex justify-between",children:[e.jsx("h3",{className:"text-xl font-medium text-secondColor",children:s.language==="en"?"Add Product":"اضافة منتج جديد"}),e.jsx("button",{className:"border border-secondColor text-secondColor py-1 px-4 rounded-md hover:brightness-110",onClick:()=>{c(!1)},children:e.jsx(R,{})})]}),e.jsx("div",{className:"bg-white px-4 pt-5 pb-4 sm:p-6 sm:pb-4 flex items-center justify-center",children:e.jsxs("div",{className:"space-y-6 w-full grid grid-cols-2 gap-3",children:[e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(l,{htmlFor:"image",value:s.language==="en"?"Image *":"الصوره *"})}),e.jsx(L,{id:"image",required:!0,onChange:a=>_(a.target.files[0])})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(l,{htmlFor:"title_en",value:s.language==="en"?"Product Name English":"اسم المنتج بالانجليزية"})}),e.jsx(i,{id:"title_en",type:"text",required:!0,value:t.title_en,onChange:a=>n({...t,title_en:a.target.value})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(l,{htmlFor:"title_ar",value:s.language==="en"?"Product Name Arabic *":"اسم المنتج بالعربية *"})}),e.jsx(i,{id:"title_ar",type:"text",required:!0,value:t.title_ar,onChange:a=>n({...t,title_ar:a.target.value})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(l,{htmlFor:"category",value:s.language==="en"?"Product Category *":"تصنيف المنتج *"})}),e.jsx(B,{name:"category",id:"category",className:"w-full",options:s.language==="en"?y:f,placeholder:s.language==="en"?"Product Category":"تصنيف المنتج",isRtl:s.language==="ar",isSearchable:!0,required:!0,value:t.category,onChange:a=>n({...t,category:a})})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(l,{htmlFor:"quantity",value:s.language==="en"?"Quantity *":"* الكمية"})}),e.jsx(i,{id:"quantity",type:"number",required:!0,value:t.quantity,onChange:a=>n({...t,quantity:a.target.value})})]}),e.jsxs("div",{className:"col-span-1",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(l,{htmlFor:"Price",value:s.language==="en"?"Price *":" *السعر"})}),e.jsx(i,{id:"Price",type:"number",required:!0,value:t.price,onChange:a=>n({...t,price:a.target.value})})]}),e.jsxs("div",{className:"col-span-2",children:[e.jsx("div",{className:"mb-2 block",children:e.jsx(l,{htmlFor:"expiry-date",value:s.language==="en"?"Expiry date *":"تاريخ الانتهاء *"})}),e.jsx(i,{id:"expiry-date",type:"date",required:!0,value:t.start_date,onChange:a=>n({...t,start_date:a.target.value})})]})]})}),e.jsxs("div",{className:" sticky z-10 bottom-0 left-0 right-0 bg-gray-50 px-4 py-3 shadow-md flex items-center gap-2",children:[e.jsx("button",{className:"bg-secondColor py-1 px-4 rounded-md hover:brightness-110 text-white mx-2",onClick:q,disabled:b,children:b?e.jsx(z,{"aria-label":"loading...",color:"purple"}):s.language==="en"?"Save":"حفظ"}),e.jsx("button",{className:"border border-secondColor text-secondColor py-1 px-4 rounded-md hover:brightness-110",onClick:()=>{c(!1)},children:s.language==="en"?"Cancel":"الغاء"}),e.jsx("span",{className:"text-xs text-red-600 font-bold",children:s.language==="en"?"Please Enter All Data*":"برجاء ادخال جميع البيانات المطلوبه*"})]})]})]})})};export{ee as default};
